import java.util.Scanner;

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        Calculadora calculadora = new Calculadora();
        Input entrada = new Input(sc);

        System.out.println("Seja bem-vindo à calculadora do Trabalho de POO I");

        boolean continuar = true;
        while (continuar) {
            System.out.println("\nEscolha a operação desejada:");
            System.out.println("1 - Soma");
            System.out.println("2 - Subtração");
            System.out.println("3 - Multiplicação");
            System.out.println("4 - Divisão");
            System.out.println("5 - Potência");
            System.out.println("6 - Raiz Quadrada");
            System.out.println("7 - Mostrar histórico");
            System.out.println("0 - Sair");
            System.out.print("Opção: ");

            int opcao = sc.nextInt();
            Operacao op = null;

            switch (opcao) {
                case 1 -> op = new Soma(entrada.lerNumero("Digite o primeiro número: "),
                        entrada.lerNumero("Digite o segundo número: "));
                case 2 -> op = new Subtracao(entrada.lerNumero("Digite o primeiro número: "),
                        entrada.lerNumero("Digite o segundo número: "));
                case 3 -> op = new Multiplicacao(entrada.lerNumero("Digite o primeiro número: "),
                        entrada.lerNumero("Digite o segundo número: "));
                case 4 -> op = new Divisao(entrada.lerNumero("Digite o primeiro número: "),
                        entrada.lerNumero("Digite o segundo número: "));
                case 5 -> op = new Potencia(entrada.lerNumero("Digite a base: "),
                        entrada.lerNumero("Digite o expoente: "));
                case 6 -> op = new RaizQuadrada(entrada.lerNumero("Digite o número: "));
                case 7 -> {
                    calculadora.mostrarHistorico();
                    continue;
                }
                case 0 -> {
                    continuar = false;
                    continue;
                }
                default -> {
                    System.out.println("Opção inválida!");
                    continue;
                }
            }

            if (op != null) {
                calculadora.calcular(op);
            }
        }

        System.out.println("Power Off");
        sc.close();
    }
}
